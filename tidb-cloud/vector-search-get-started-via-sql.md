---
title: Get Started with Vector Search via SQL
summary: Learn how to quickly get started with the TiDB Vector Search feature and power the generative AI application.
---

# Get Started with Vector Search via SQL

TiDB extends the MySQL SQL syntax to support vector search feature, introducing the new VECTOR data type and a series of vector functions.

This tutorial will guide you to get started with the vector search feature, using SQL to create vector table, store embedding data, and perform vector search queries.

> **Note**
> 
> The Vector Search feature is only available for TiDB Serverless at this moment.

## Prerequisites

To complete this tutorial, you need:

- [MySQL Command-Line Client](https://dev.mysql.com/doc/refman/8.4/en/mysql.html) (MySQL CLI) installed on your machine.
- A TiDB Serverless cluster running. 

<CustomContent platform="tidb-cloud">

**If you don't have a TiDB cluster, you can create one as follows:**

- (Recommended) Follow [Creating a TiDB Serverless cluster](/develop/dev-guide-build-cluster-in-cloud.md) to create your own TiDB Cloud cluster.

</CustomContent>

## Get Started

### Step 1. Connect to the TiDB cluster

<SimpleTab>

<div label="TiDB Serverless">

1. Navigate to the [**Clusters**](https://tidbcloud.com/console/clusters) page, and then click the name of your target cluster to go to its overview page.

2. Click **Connect** in the upper-right corner.

3. In the connection dialog, select **MySQL CLI** from the **Connect With** dropdown and keep the default setting of the **Endpoint Type** as **Public**.

4. If you have not set a password yet, click **Create password** to generate a random password.

5. Click **Copy** icon to copy the connection command and paste it into your terminal to run.

    For example, the command on macOS looks like:

    ```bash
    mysql -u '<prefix>.root' -h '<host>' -P 4000 -D 'test' --ssl-mode=VERIFY_IDENTITY --ssl-ca=/etc/ssl/cert.pem -p'<password>'
    ```

</div>

</SimpleTab>

### Step 2. Create a vector table

With vector search supported, you can use the `VECTOR` type column to store [embedding vector](/tidb-cloud/vector-search-overview.md#embedding-vector) in TiDB. 

Execute the following SQL statement via your MySQL CLI to create a table containing a column of type `VECTOR` with dimension 3.

```sql
USE test;
CREATE TABLE embeded_documents (
    id        INT       PRIMARY KEY,
    -- Column to store the original content of the document.
    document  TEXT,
    -- Column to store the vector representation of the document.
    embedding VECTOR(3)
);
```

Expected output:

```text
Query OK, 0 rows affected (0.27 sec)
```

### Step 3. Store the embedding vector 

Insert three documents with their embedding vectors into the `embeded_documents` table.

```sql
INSERT INTO embeded_documents
VALUES
    (1, 'dog', '[1,2,1]'),
    (2, 'fish', '[1,2,4]'),
    (3, 'tree', '[1,0,0]');
```

Expected output:

```
Query OK, 3 rows affected (0.15 sec)
Records: 3  Duplicates: 0  Warnings: 0
```

> **Note**
> 
> In this example, we simplify the dimensions of the embedding vector and use only 3-dimensional vectors.
> 
> However, in real-world applications, the [embedding vectors](/tidb-cloud/vector-search-overview.md#embedding-vector) are generated by the [embedding model](/tidb-cloud/vector-search-overview.md#embedding-model) may have hundreds or even thousands of dimensions.

### Step 4. Query the vector table

Query the `embeded_documents` table to check the documents you have inserted.

```sql
SELECT * FROM embeded_documents;
```

Expected output:

```sql
+----+----------+-----------+
| id | document | embedding |
+----+----------+-----------+
|  1 | dog      | [1,2,1]   |
|  2 | fish     | [1,2,4]   |
|  3 | tree     | [1,0,0]   |
+----+----------+-----------+
3 rows in set (0.15 sec)
```

### Step 5. Perform vector search queries

Similar to full-text search, the user provides the application with a search term when searching.

In this example, we will search for "a swimming animal", and its corresponding embedding vector is `[1,2,3]`. In practical applications, you need to use an embedding model to convert a user's search terms into an embedding vector.

Run the following SQL statement, TiDB will find the top-3 nearest neighbor documents of the search term by calculating and sorting the cosine distances (`vec_cosine_distance`) between embedding vectors.

```sql
SELECT id, document, vec_cosine_distance(embedding, '[1,2,3]') AS distance
FROM embeded_documents
ORDER BY distance
LIMIT 3;
```

Expected output:

```plain
+----+----------+---------------------+
| id | document | distance            |
+----+----------+---------------------+
|  2 | fish     | 0.00853986601633272 |
|  1 | dog      | 0.12712843905603044 |
|  3 | tree     |  0.7327387580875756 |
+----+----------+---------------------+
3 rows in set (0.15 sec)
```

Great! The swimming animal is most likely a fish, or a dog with a gift for swimming.

## See also

- [Vector Column](/tidb-cloud/vector-search-vector-column.md)
- [Vector HNSW Index](/tidb-cloud/vector-search-vector-index.md)
